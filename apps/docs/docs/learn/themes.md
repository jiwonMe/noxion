---
sidebar_position: 7
title: Themes
description: Customize the look and feel of your Noxion site with theme contracts, CSS variables, and dark mode.
---

# Themes

Noxion uses a **contract-based theme system**. Each theme is a `NoxionThemeContract` object that bundles components, layouts, and templates together. Visual customization is done through **CSS custom properties (CSS variables)** — no build step, no configuration changes, and no JavaScript required.

For advanced use cases, `defineThemeContract()` lets you create full theme contracts with custom components, layouts, and templates.

---

## Built-in themes

Noxion ships with **2 official themes**, each published as an independent npm package:

| Theme | Package | Style |
|-------|---------|-------|
| **Default** | `@noxion/theme-default` | Clean, modern layout with system fonts, rounded cards, and a sticky header. The base theme for most sites. |
| **Beacon** | `@noxion/theme-beacon` | Content-first reading experience — extra-wide content area (1320px), static header, large typography. Includes custom `HomePage` and `PostPage` components. |

### Using a theme

Install the theme package and pass the contract to the provider:

```bash
bun add @noxion/theme-default
```

```tsx
// app/providers.tsx
import { NoxionThemeProvider } from "@noxion/renderer";
import { defaultThemeContract } from "@noxion/theme-default";

export function Providers({ children }: { children: React.ReactNode }) {
  return (
    <NoxionThemeProvider themeContract={defaultThemeContract} defaultMode="system">
      {children}
    </NoxionThemeProvider>
  );
}
```

To switch themes, swap the contract:

```tsx
import { beaconThemeContract } from "@noxion/theme-beacon";

<NoxionThemeProvider themeContract={beaconThemeContract} defaultMode="system">
```

---

## Color modes

Three color modes are supported:

| Mode | Behavior |
|------|----------|
| `"light"` | Always light theme, ignores OS preference |
| `"dark"` | Always dark theme, ignores OS preference |
| `"system"` | Follows the user's OS dark/light mode setting |

Set the default in `noxion.config.ts`:

```ts
export default defineConfig({
  defaultTheme: "system",   // recommended
  // ...
});
```

The user's explicit choice (if they click the theme toggle) is persisted in `localStorage` and takes priority over `defaultTheme`.

### How `"system"` works

When `defaultTheme: "system"`, Noxion uses the [`prefers-color-scheme`](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media query to detect the user's OS preference:

```css
@media (prefers-color-scheme: dark) {
  :root {
    /* dark theme variables applied automatically */
  }
}
```

---

## FOUC prevention

A common problem with JS-based theme systems is **Flash of Unstyled Content (FOUC)** — a brief flash of the wrong theme before React hydrates and applies the correct one.

Noxion prevents this by injecting a `<ThemeScript>` component into `<head>`. This script runs synchronously before paint, reads `localStorage` for any saved preference, and sets `data-theme="light"` or `data-theme="dark"` on `<html>` before any content is rendered:

```tsx
// app/layout.tsx (generated by create-noxion)
import { ThemeScript } from "./theme-script";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <ThemeScript />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

The `suppressHydrationWarning` on `<html>` is necessary because `data-theme` is set by the script before React hydrates.

---

## CSS variables

All visual properties are exposed as CSS custom properties on `:root` (light mode) and `[data-theme="dark"]`.

### Color tokens

```css
:root {
  --noxion-primary: #2563eb;          /* Primary accent color (links, buttons) */
  --noxion-primary-hover: #1d4ed8;    /* Hover state for primary */
  --noxion-background: #ffffff;       /* Page background */
  --noxion-card: #ffffff;             /* Card/widget background */
  --noxion-muted: #f5f5f5;            /* Subtle background (code blocks, etc.) */
  --noxion-foreground: #0a0a0a;       /* Main text color */
  --noxion-card-foreground: #0a0a0a;  /* Text on cards */
  --noxion-muted-foreground: #737373; /* Secondary/disabled text */
  --noxion-border: #e5e5e5;           /* Default border color */
  --noxion-border-radius: 0.5rem;     /* Default border radius */
}

[data-theme="dark"] {
  --noxion-background: #0a0a0a;
  --noxion-foreground: #fafafa;
  --noxion-card: #1a1a1a;
  --noxion-card-foreground: #fafafa;
  --noxion-muted: #262626;
  --noxion-muted-foreground: #a3a3a3;
  --noxion-border: #2a2a2a;
}
```

### Typography tokens

```css
:root {
  --noxion-font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, sans-serif;
  --noxion-font-mono: "JetBrains Mono", "Fira Code", Menlo, Monaco,
    "Cascadia Code", "Courier New", monospace;
  --noxion-font-size-base: 1rem;
  --noxion-line-height-base: 1.75;
  --noxion-font-size-sm: 0.875rem;
  --noxion-font-size-lg: 1.125rem;
}
```

---

## Customizing the theme

Override variables in your `globals.css` (or equivalent global stylesheet):

```css
/* app/globals.css */

:root {
  --noxion-primary: #7c3aed;       /* Violet instead of blue */
  --noxion-primary-hover: #6d28d9;
  --noxion-border-radius: 0.25rem; /* More angular cards */
}

/* Custom font (after loading via next/font or @font-face) */
:root {
  --noxion-font-sans: "Inter", system-ui, sans-serif;
}

/* Custom dark mode colors */
[data-theme="dark"] {
  --noxion-background: #0f0f23;
  --noxion-card: #16213e;
  --noxion-border: #1a1a2e;
}
```

### Using Google Fonts / next/font

```tsx
// app/layout.tsx
import { Inter } from "next/font/google";

const inter = Inter({ subsets: ["latin"] });

export default function RootLayout({ children }) {
  return (
    <html style={{ "--noxion-font-sans": inter.style.fontFamily } as React.CSSProperties}>
      <body className={inter.className}>{children}</body>
    </html>
  );
}
```

---

## Theme contracts with `defineThemeContract()`

A theme contract bundles all the React components, layouts, and templates that make up a theme. Use `defineThemeContract()` to create one:

```ts
import { defineThemeContract } from "@noxion/renderer";
import type { NoxionThemeContract } from "@noxion/renderer";

import { Header, Footer, PostCard, FeaturedPostCard, PostList, HeroSection,
  TOC, Search, TagFilter, ThemeToggle, EmptyState, NotionPage,
  DocsSidebar, DocsBreadcrumb, PortfolioProjectCard, PortfolioFilter,
} from "./components";

import { BaseLayout, BlogLayout } from "./layouts";
import { HomePage, PostPage, ArchivePage, TagPage } from "./templates";

export const myThemeContract: NoxionThemeContract = defineThemeContract({
  name: "my-theme",

  metadata: {
    description: "A custom theme for Noxion",
    author: "Your Name",
    version: "1.0.0",
  },

  components: {
    Header, Footer, PostCard, FeaturedPostCard, PostList, HeroSection,
    TOC, Search, TagFilter, ThemeToggle, EmptyState, NotionPage,
    DocsSidebar, DocsBreadcrumb, PortfolioProjectCard, PortfolioFilter,
  },

  layouts: {
    base: BaseLayout,
    blog: BlogLayout,
  },

  templates: {
    home: HomePage,
    post: PostPage,
    archive: ArchivePage,
    tag: TagPage,
  },

  supports: ["blog"],
});
```

### Creating a theme package

Use the CLI to scaffold a theme starter:

```bash
bun create noxion my-theme --theme
```

This creates a package with:
- `src/index.ts` — exports a `NoxionThemeContract` object
- `styles/` — CSS variable overrides
- `package.json` — configured for npm publishing

See [Creating a Custom Theme](./creating-theme) for a full walkthrough.

### Theme metadata

Themes can declare metadata and which page types they support:

```ts
interface NoxionThemeMetadata {
  description?: string;
  author?: string;
  version?: string;
  preview?: string;
}
```

The `supports` field declares which page types the theme has templates for:

```ts
supports: ["blog", "docs"]  // This theme only has blog and docs templates
```

---

## Theme toggle component

The scaffolded app includes a `<ThemeToggle>` component in the header that lets users switch between light, dark, and system modes. The toggle:

1. Reads the current mode from context (`useThemePreference()`)
2. Cycles through `light -> dark -> system` on click
3. Persists the choice to `localStorage`
4. Updates `data-theme` on `<html>` without a full page reload

### Hiding the toggle

If you want to remove the toggle (e.g., for a light-only site):

```ts
// noxion.config.ts
export default defineConfig({
  defaultTheme: "light",
  // ...
});
```

Then remove the `<ThemeToggle>` from your `<Header>` component.

---

## Hooks

For advanced customization, `@noxion/renderer` exports these React hooks:

### `useThemePreference()`

Returns the user's **preference setting** (including `"system"`) and a setter:

```tsx
import { useThemePreference } from "@noxion/renderer";

function ThemeSelector() {
  const { mode, setMode } = useThemePreference();

  return (
    <select value={mode} onChange={(e) => setMode(e.target.value as ThemeMode)}>
      <option value="light">Light</option>
      <option value="dark">Dark</option>
      <option value="system">System</option>
    </select>
  );
}
```

### `useThemeContract()`

Returns the active `NoxionThemeContract`:

```tsx
import { useThemeContract } from "@noxion/renderer";

function MyComponent() {
  const contract = useThemeContract();
  console.log(contract.name); // "default", "beacon", etc.
}
```

### `useThemeComponent(name)`

Returns a specific component from the active theme contract:

```tsx
import { useThemeComponent } from "@noxion/renderer";

function MyPage() {
  const PostList = useThemeComponent("PostList");
  return <PostList posts={posts} />;
}
```

### `useThemeLayout(name)` / `useThemeTemplate(name)`

Returns layout or template components from the contract:

```tsx
import { useThemeLayout, useThemeTemplate } from "@noxion/renderer";

function MyPage() {
  const BlogLayout = useThemeLayout("blog");
  const HomePage = useThemeTemplate("home");
  // ...
}
```

All hooks must be used inside a component wrapped by `<NoxionThemeProvider>`.
