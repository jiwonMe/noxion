---
sidebar_position: 7
title: Themes
description: Customize the look and feel of your Noxion blog with CSS variables and dark mode.
---

# Themes

Noxion uses a **CSS custom properties (CSS variables)** system for theming. This means you can customize every color, font, and spacing value by overriding variables in your global CSS — no build step, no configuration changes, and no JavaScript required.

---

## Color modes

Three color modes are supported:

| Mode | Behavior |
|------|----------|
| `"light"` | Always light theme, ignores OS preference |
| `"dark"` | Always dark theme, ignores OS preference |
| `"system"` | Follows the user's OS dark/light mode setting |

Set the default in `noxion.config.ts`:

```ts
export default defineConfig({
  defaultTheme: "system",   // recommended
  // ...
});
```

The user's explicit choice (if they click the theme toggle) is persisted in `localStorage` and takes priority over `defaultTheme`.

### How `"system"` works

When `defaultTheme: "system"`, Noxion uses the [`prefers-color-scheme`](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media query to detect the user's OS preference:

```css
@media (prefers-color-scheme: dark) {
  :root {
    /* dark theme variables applied automatically */
  }
}
```

---

## FOUC prevention

A common problem with JS-based theme systems is **Flash of Unstyled Content (FOUC)** — a brief flash of the wrong theme before React hydrates and applies the correct one.

Noxion prevents this by injecting a `<ThemeScript>` component into `<head>`. This script runs synchronously before paint, reads `localStorage` for any saved preference, and sets `data-theme="light"` or `data-theme="dark"` on `<html>` before any content is rendered:

```tsx
// app/layout.tsx (generated by create-noxion)
import { ThemeScript } from "./theme-script";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <ThemeScript />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

The `suppressHydrationWarning` on `<html>` is necessary because `data-theme` is set by the script before React hydrates, creating a mismatch between server-rendered HTML and client-side React. This is intentional and expected. See [Next.js docs on suppressHydrationWarning](https://nextjs.org/docs/messages/react-hydration-error#solution-1-using-suppresshydrationwarning).

---

## CSS variables

All visual properties are exposed as CSS custom properties on `:root` (light mode) and `[data-theme="dark"]`.

### Color tokens

```css
:root {
  /* Brand */
  --noxion-primary: #2563eb;          /* Primary accent color (links, buttons) */
  --noxion-primary-hover: #1d4ed8;    /* Hover state for primary */

  /* Backgrounds */
  --noxion-background: #ffffff;       /* Page background */
  --noxion-card: #ffffff;             /* Card/widget background */
  --noxion-muted: #f5f5f5;            /* Subtle background (code blocks, etc.) */

  /* Foregrounds */
  --noxion-foreground: #0a0a0a;       /* Main text color */
  --noxion-card-foreground: #0a0a0a;  /* Text on cards */
  --noxion-muted-foreground: #737373; /* Secondary/disabled text */

  /* Borders */
  --noxion-border: #e5e5e5;           /* Default border color */

  /* Misc */
  --noxion-border-radius: 0.5rem;     /* Default border radius */
}

[data-theme="dark"] {
  --noxion-background: #0a0a0a;
  --noxion-foreground: #fafafa;
  --noxion-card: #1a1a1a;
  --noxion-card-foreground: #fafafa;
  --noxion-muted: #262626;
  --noxion-muted-foreground: #a3a3a3;
  --noxion-border: #2a2a2a;
}
```

### Typography tokens

```css
:root {
  --noxion-font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, sans-serif;
  --noxion-font-mono: "JetBrains Mono", "Fira Code", Menlo, Monaco,
    "Cascadia Code", "Courier New", monospace;
  --noxion-font-size-base: 1rem;        /* 16px */
  --noxion-line-height-base: 1.75;
  --noxion-font-size-sm: 0.875rem;      /* 14px */
  --noxion-font-size-lg: 1.125rem;      /* 18px */
}
```

---

## Customizing the theme

Override variables in your `globals.css` (or equivalent global stylesheet):

```css
/* app/globals.css */

/* Custom primary color */
:root {
  --noxion-primary: #7c3aed;       /* Violet instead of blue */
  --noxion-primary-hover: #6d28d9;
  --noxion-border-radius: 0.25rem; /* More angular cards */
}

/* Custom font (after loading via next/font or @font-face) */
:root {
  --noxion-font-sans: "Inter", system-ui, sans-serif;
}

/* Custom dark mode colors */
[data-theme="dark"] {
  --noxion-background: #0f0f23;   /* Deep navy instead of near-black */
  --noxion-card: #16213e;
  --noxion-border: #1a1a2e;
}
```

### Using Google Fonts / next/font

Noxion is compatible with Next.js's [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) for zero-CLS font loading:

```tsx
// app/layout.tsx
import { Inter } from "next/font/google";

const inter = Inter({ subsets: ["latin"] });

export default function RootLayout({ children }) {
  return (
    <html style={{ "--noxion-font-sans": inter.style.fontFamily } as React.CSSProperties}>
      <body className={inter.className}>{children}</body>
    </html>
  );
}
```

---

## Theme toggle component

The scaffolded app includes a `<ThemeToggle>` component in the header that lets users switch between light, dark, and system modes. The toggle:

1. Reads the current mode from context (`useThemePreference()`)
2. Cycles through `light → dark → system` on click
3. Persists the choice to `localStorage`
4. Updates `data-theme` on `<html>` without a full page reload

The toggle is rendered in `app/layout.tsx` via `<Header>` from `@noxion/renderer`.

### Hiding the toggle

If you want to remove the toggle (e.g., for a light-only blog):

```ts
// noxion.config.ts
export default defineConfig({
  defaultTheme: "light",
  // ...
});
```

Then remove the `<ThemeToggle>` from your `<Header>` component, or override the `Header` component entirely.

---

## Hooks

For advanced customization, `@noxion/renderer` exports two React hooks:

### `useNoxionTheme()`

Returns the **current active theme** (resolved — no `"system"` here):

```tsx
import { useNoxionTheme } from "@noxion/renderer";

function MyComponent() {
  const theme = useNoxionTheme();
  // theme.name: "light" | "dark"

  return <div className={theme.name === "dark" ? "dark-style" : "light-style"} />;
}
```

### `useThemePreference()`

Returns the user's **preference setting** (including `"system"`) and a setter:

```tsx
import { useThemePreference } from "@noxion/renderer";

function ThemeSelector() {
  const { mode, setMode } = useThemePreference();
  // mode: "light" | "dark" | "system"
  // setMode: (mode: ThemeMode) => void

  return (
    <select value={mode} onChange={(e) => setMode(e.target.value as ThemeMode)}>
      <option value="light">Light</option>
      <option value="dark">Dark</option>
      <option value="system">System</option>
    </select>
  );
}
```

Both hooks must be used inside a component wrapped by `<NoxionThemeProvider>`.
