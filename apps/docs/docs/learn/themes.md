---
sidebar_position: 7
title: Themes
description: Customize the look and feel of your Noxion site with CSS variables, theme inheritance, and dark mode.
---

# Themes

Noxion uses a **CSS custom properties (CSS variables)** system for theming. You can customize every color, font, and spacing value by overriding variables — no build step, no configuration changes, and no JavaScript required.

For advanced use cases, `extendTheme()` lets you create derived themes from the default theme with partial overrides.

---

## Color modes

Three color modes are supported:

| Mode | Behavior |
|------|----------|
| `"light"` | Always light theme, ignores OS preference |
| `"dark"` | Always dark theme, ignores OS preference |
| `"system"` | Follows the user's OS dark/light mode setting |

Set the default in `noxion.config.ts`:

```ts
export default defineConfig({
  defaultTheme: "system",   // recommended
  // ...
});
```

The user's explicit choice (if they click the theme toggle) is persisted in `localStorage` and takes priority over `defaultTheme`.

### How `"system"` works

When `defaultTheme: "system"`, Noxion uses the [`prefers-color-scheme`](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme) media query to detect the user's OS preference:

```css
@media (prefers-color-scheme: dark) {
  :root {
    /* dark theme variables applied automatically */
  }
}
```

---

## FOUC prevention

A common problem with JS-based theme systems is **Flash of Unstyled Content (FOUC)** — a brief flash of the wrong theme before React hydrates and applies the correct one.

Noxion prevents this by injecting a `<ThemeScript>` component into `<head>`. This script runs synchronously before paint, reads `localStorage` for any saved preference, and sets `data-theme="light"` or `data-theme="dark"` on `<html>` before any content is rendered:

```tsx
// app/layout.tsx (generated by create-noxion)
import { ThemeScript } from "./theme-script";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en" suppressHydrationWarning>
      <head>
        <ThemeScript />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

The `suppressHydrationWarning` on `<html>` is necessary because `data-theme` is set by the script before React hydrates.

---

## CSS variables

All visual properties are exposed as CSS custom properties on `:root` (light mode) and `[data-theme="dark"]`.

### Color tokens

```css
:root {
  --noxion-primary: #2563eb;          /* Primary accent color (links, buttons) */
  --noxion-primary-hover: #1d4ed8;    /* Hover state for primary */
  --noxion-background: #ffffff;       /* Page background */
  --noxion-card: #ffffff;             /* Card/widget background */
  --noxion-muted: #f5f5f5;            /* Subtle background (code blocks, etc.) */
  --noxion-foreground: #0a0a0a;       /* Main text color */
  --noxion-card-foreground: #0a0a0a;  /* Text on cards */
  --noxion-muted-foreground: #737373; /* Secondary/disabled text */
  --noxion-border: #e5e5e5;           /* Default border color */
  --noxion-border-radius: 0.5rem;     /* Default border radius */
}

[data-theme="dark"] {
  --noxion-background: #0a0a0a;
  --noxion-foreground: #fafafa;
  --noxion-card: #1a1a1a;
  --noxion-card-foreground: #fafafa;
  --noxion-muted: #262626;
  --noxion-muted-foreground: #a3a3a3;
  --noxion-border: #2a2a2a;
}
```

### Typography tokens

```css
:root {
  --noxion-font-sans: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, sans-serif;
  --noxion-font-mono: "JetBrains Mono", "Fira Code", Menlo, Monaco,
    "Cascadia Code", "Courier New", monospace;
  --noxion-font-size-base: 1rem;
  --noxion-line-height-base: 1.75;
  --noxion-font-size-sm: 0.875rem;
  --noxion-font-size-lg: 1.125rem;
}
```

---

## Customizing the theme

Override variables in your `globals.css` (or equivalent global stylesheet):

```css
/* app/globals.css */

:root {
  --noxion-primary: #7c3aed;       /* Violet instead of blue */
  --noxion-primary-hover: #6d28d9;
  --noxion-border-radius: 0.25rem; /* More angular cards */
}

/* Custom font (after loading via next/font or @font-face) */
:root {
  --noxion-font-sans: "Inter", system-ui, sans-serif;
}

/* Custom dark mode colors */
[data-theme="dark"] {
  --noxion-background: #0f0f23;
  --noxion-card: #16213e;
  --noxion-border: #1a1a2e;
}
```

### Using Google Fonts / next/font

```tsx
// app/layout.tsx
import { Inter } from "next/font/google";

const inter = Inter({ subsets: ["latin"] });

export default function RootLayout({ children }) {
  return (
    <html style={{ "--noxion-font-sans": inter.style.fontFamily } as React.CSSProperties}>
      <body className={inter.className}>{children}</body>
    </html>
  );
}
```

---

## Theme inheritance with `extendTheme()`

For creating reusable theme packages, `@noxion/renderer` provides `extendTheme()`. This performs a deep merge of theme overrides onto the default theme:

```ts
import { extendTheme, themeDefault } from "@noxion/renderer";

const myTheme = extendTheme(themeDefault, {
  tokens: {
    colors: {
      primary: "#7c3aed",
      primaryHover: "#6d28d9",
    },
    fonts: {
      sans: '"Inter", system-ui, sans-serif',
    },
  },
  metadata: {
    name: "My Custom Theme",
    author: "Jane Doe",
    version: "1.0.0",
    description: "A violet-accented theme",
  },
  supports: ["blog", "docs", "portfolio"],
});
```

### Creating a theme package

Use the CLI to scaffold a theme starter:

```bash
bun create noxion my-theme --theme
```

This creates a package with:
- `src/index.ts` — exports a `NoxionThemePackage` object
- `styles/theme.css` — CSS variable overrides
- `package.json` — configured for npm publishing

See [Creating a Custom Theme](./creating-theme) for a full walkthrough.

### Theme metadata

Themes can declare metadata and which page types they support:

```ts
interface NoxionThemeMetadata {
  name: string;
  author?: string;
  version?: string;
  description?: string;
  previewUrl?: string;
  repository?: string;
}
```

The `supports` field declares which page types the theme has templates for:

```ts
supports: ["blog", "docs"]  // This theme only has blog and docs templates
```

---

## Theme toggle component

The scaffolded app includes a `<ThemeToggle>` component in the header that lets users switch between light, dark, and system modes. The toggle:

1. Reads the current mode from context (`useThemePreference()`)
2. Cycles through `light → dark → system` on click
3. Persists the choice to `localStorage`
4. Updates `data-theme` on `<html>` without a full page reload

### Hiding the toggle

If you want to remove the toggle (e.g., for a light-only site):

```ts
// noxion.config.ts
export default defineConfig({
  defaultTheme: "light",
  // ...
});
```

Then remove the `<ThemeToggle>` from your `<Header>` component.

---

## Hooks

For advanced customization, `@noxion/renderer` exports two React hooks:

### `useNoxionTheme()`

Returns the **current active theme** (resolved — no `"system"` here):

```tsx
import { useNoxionTheme } from "@noxion/renderer";

function MyComponent() {
  const theme = useNoxionTheme();
  // theme.name: "light" | "dark"

  return <div className={theme.name === "dark" ? "dark-style" : "light-style"} />;
}
```

### `useThemePreference()`

Returns the user's **preference setting** (including `"system"`) and a setter:

```tsx
import { useThemePreference } from "@noxion/renderer";

function ThemeSelector() {
  const { mode, setMode } = useThemePreference();

  return (
    <select value={mode} onChange={(e) => setMode(e.target.value as ThemeMode)}>
      <option value="light">Light</option>
      <option value="dark">Dark</option>
      <option value="system">System</option>
    </select>
  );
}
```

Both hooks must be used inside a component wrapped by `<NoxionThemeProvider>`.
